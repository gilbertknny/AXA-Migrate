<?xml version="1.0" encoding="UTF-8"?>
<WebLink xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Accept_Case</fullName>
    <availability>online</availability>
    <displayType>button</displayType>
    <linkType>javascript</linkType>
    <masterLabel>Accept Case</masterLabel>
    <openType>onClickJavaScript</openType>
    <protected>false</protected>
    <url>{!REQUIRESCRIPT(&quot;/soap/ajax/43.0/connection.js&quot;)}
{!REQUIRESCRIPT(&quot;/soap/ajax/43.0/apex.js&quot;)}
{!REQUIRESCRIPT(&quot;/support/console/42.0/integration.js&quot;)}

if (sforce.console.isInConsole()) {
    console.log(sforce.console.isInConsole());
    sforce.console.getEnclosingPrimaryTabId(function EditTab(result) {
	var tabId = result.id;
        console.log(&quot;primary tab ID = &quot; + tabId);

        var url = &quot;/apex/popupUserOnCase?id={!Case.Id}&amp;pTabId=&quot; + tabId;
        console.log(url);
        sforce.console.openPrimaryTab(tabId, url, true, &quot;{!Case.CaseNumber}&quot;);
        //sforce.console.openPrimaryTab(null, url, true, &quot;{!Case.CaseNumber}&quot;);
    });
} else {
    window.open(&quot;/apex/popupUserOnCase?id={!Case.Id}&quot;, &quot;_blank&quot;, &quot;width=400,height=300&quot;);
    //alert(&quot;classic view&quot;);
}</url>
</WebLink>
